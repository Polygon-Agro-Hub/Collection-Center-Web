<app-loading-spinner *ngIf="isLoading" />

<div *ngIf="!isLoading">
    <div class="flex flex-row items-center gap-6 font-semibold text[#424242] mb-5 mx-5">
        <p onclick="history.back()">Centers</p>
        <p>Center Dashboard</p>
    </div>

    <div class="flex flex-row items-center justify-center gap-16 dark:bg-black cursor-default">
        <div class="flex justify-center items-center w-1/5 py-4 bg-tileLight dark:bg-[#363636]  shadow-lg rounded-lg">
            <p class="font-bold text-black text-lg dark:text-white">{{centerNameObj.regCode}}</p>
        </div>

        <div class="flex flex-row items-center justify-between w-2/5 gap-14 px-10 py-4 bg-tileLight shadow-lg rounded-lg cursor-pointer"
            (click)="navigateToMarketPrice()">

            <div class="w-3 h-3"></div>
            <p class="font-bold text-black text-lg">View Market Price</p>
            <i class="fa-solid fa-arrow-up-right-from-square text-[#415CFF] text-xl"></i>
        </div>

        <div class="flex flex-row items-center justify-center w-2/5 py-4 bg-[#415CFF] shadow-lg rounded-lg cursor-pointer"
            (click)="navigateAddTarget()">
            <p class="font-bold text-tileLight text-lg">Assign Center Target</p>
        </div>
    </div>

    <div class="flex flex-row items-center justify-center gap-16 my-8">
        <div class="flex flex-col justify-center items-center gap-y-3 w-1/5 py-4 bg-tileLight dark:bg-[#363636] shadow-lg rounded-lg cursor-pointer"
            (click)="viewCenterTarget()">
            <i class="fa-solid fa-bullseye text-[#415CFF] text-5xl"></i>
            <div class="flex flex-col justify-center items-center cursor-default">
                <p class="font-bold text-black text-lg dark:text-white">Current</p>
                <p class="font-bold text-black text-lg dark:text-white">Target</p>
            </div>
            <div class="flex flex-row w-full items-center justify-end">
                <i class="fa-solid fa-arrow-up-right-from-square text-[#415CFF] text-xl mx-4"></i>

            </div>

        </div>

        <div
            class="flex flex-col items-center justify-center w-2/5 py-5 bg-[#FB923C] shadow-lg rounded-lg cursor-default">
            <i class="fa-solid fa-layer-group text-2xl text-white"></i>
            <div class="flex flex-col justify-center items-center ">
                <p class="font-bold text-white text-lg">Today Collection</p>
                <p class="font-bold text-white text-lg">{{transCount < 10 ? '0' + transCount : transCount}}
                        Transactions</p>
            </div>
            <p class="font-bold text-white text-2xl my-4">
                {{ transAmount | currency:'Rs. ':'symbol':'1.2-2' }}
            </p>


        </div>

        <div
            class="flex flex-col items-center justify-center w-2/5 py-5 bg-[#619DFF] shadow-lg rounded-lg cursor-default">
            <i class="fa-solid fa-layer-group text-2xl text-white"></i>
            <div class="flex flex-col justify-center items-center">
                <p class="font-bold text-white text-lg">Today Sales</p>
                <p class="font-bold text-white text-lg">400 Transactions</p>
            </div>
            <p class="font-bold text-white text-2xl my-4">Rs. 3,50,000</p>
        </div>
    </div>


    <div class="flex flex-row items-center justify-center gap-16 my-8">
        <div class="w-1/5 pt-6 pb-1 bg-tileLight dark:bg-[#363636] shadow-lg rounded-lg cursor-default">
            <div class="flex flex-row items-center justify-start mx-5 gap-5 ">
                <div class="bg-[#CCFBF1] p-3 rounded-full">
                    <i class="fa-solid fa-users text-3xl"></i>
                </div>
                <div class="flex flex-col justify-center items-center ">
                    <p class="text-[#627189] dark:text-white">Officers</p>
                    <p class="font-bold text-black text-lg dark:text-white">{{centerNameObj.officerCount < 10 ? '0' +
                            centerNameObj.officerCount : centerNameObj.officerCount}}</p>
                </div>
            </div>
            <div class="flex flex-row items-end justify-end">
                <i class="fa-solid fa-arrow-up-right-from-square text-[#415CFF] mx-4"
                    (click)="navigateCenterOfficers()"></i>
            </div>
        </div>

        <div class="w-2/5 pb-1 bg-tileLight dark:bg-[#363636] shadow-lg rounded-lg cursor-default">
            <div class="flex flex-row items-end justify-end">
                <i *ngIf="expencePrecentage >= 0" class="fa-solid fa-arrow-trend-up text-[#0D9488] mx-2 "></i>
                <i *ngIf="expencePrecentage < 0" class="fa-solid fa-arrow-trend-down text-[#D70000] mx-2 "></i>
                <p class="text-[#0D9488] mx-2 mt-1 dark:text-white"
                    [ngClass]="{ 'text-[#D70000]': expencePrecentage < 0 }">{{expencePrecentage}}</p>
            </div>
            <div class="flex flex-row items-center justify-start mx-5 gap-5">
                <div class="bg-[#CCFBF1] p-3 rounded-full">
                    <i class="fa-solid fa-arrow-trend-up text-[#415CFF] text-3xl"></i>
                </div>
                <div class="flex flex-col justify-start items-start">
                    <p class="text-[#627189] dark:text-white">Total Collection Expense</p>
                    <p class="font-bold text-black text-lg">{{ totExpences | currency:'Rs. ':'symbol':'1.2-2' }}</p>
                </div>
            </div>
            <div class="flex flex-row items-end justify-end gap-2">
                <p class="text-[#627189] dark:text-white">30 days</p>
                <i class="fa-solid fa-arrow-up-right-from-square text-[#415CFF] mx-4"></i>
            </div>
        </div>

        <div class="w-2/5 pb-1 bg-tileLight dark:bg-[#363636] shadow-lg rounded-lg cursor-default">
            <div class="flex flex-row items-end justify-end">
                <i class="fa-solid fa-arrow-trend-down text-[#D70000] mx-2"></i>
                <p class="text-[#D70000] mx-2 mt-1 dark:text-white">34.7%</p>
            </div>
            <div class="flex flex-row items-center justify-start mx-5 gap-5">
                <div class="bg-[#CCFBF1] p-3 rounded-full">
                    <i class="fa-solid fa-arrow-trend-down text-[#415CFF] text-3xl"></i>
                </div>
                <div class="flex flex-col justify-start items-start">
                    <p class="text-[#627189] dark:text-white">Total Collection Expense</p>
                    <p class="font-bold text-black text-lg dark:text-white">Rs. 11,25,568</p>
                </div>
            </div>
            <div class="flex flex-row items-end justify-end gap-2">
                <p class="text-[#627189] dark:text-white">30 days</p>
                <i class="fa-solid fa-arrow-up-right-from-square text-[#415CFF] mx-4"></i>
            </div>
        </div>
    </div>


    <div class="w-full px-10 py-7 bg-tileLight dark:bg-[#363636] shadow-lg rounded-lg my-8">
        <div class="flex flex-row items-center gap-7">
            <div class="py-1 font-semibold text-[#627189] cursor-pointer"
                [ngClass]="{ 'border-b-2 border-[#415CFF] text-black': selectTable==='collection' }"
                (click)="chooseTable('collection')">
                <p class="dark:text-white">Recent Collections</p>
            </div>
            <div class="py-1 font-semibold text-[#627189] cursor-pointer"
                [ngClass]="{ 'border-b-2 border-[#415CFF] text-black': selectTable==='sale' }"
                (click)="chooseTable('sale')">
                <p class="dark:text-white">Recent Sales</p>
            </div>
        </div>
        <div *ngIf="selectTable==='collection'"
            class="overflow-x-auto mt-8 mr-5 border-gray-100 border-[2px] rounded-lg dark:border-[#202021]">
            <table class="w-full divide-y-2 overflow-hidden">
                <thead class=" text-gray-700 dark:text-gray-300 dark:bg-[#0F0F0F] dark:border-[#202021]">
                    <tr>
                        <th class="px-6 py-3 text-left font-medium">No</th>
                        <th class="px-6 py-3 text-left font-medium">Crop Name</th>
                        <th class="px-6 py-3 text-left font-medium">Variety Name</th>
                        <th class="px-6 py-3 text-left font-medium">Grade</th>
                        <th class="px-6 py-3 text-left font-medium">Collected (kg)</th>
                        <th class="px-6 py-3 text-left font-medium">Value (Rs.)</th>
                        <th class="px-6 py-3 text-center font-medium">Date</th>
                    </tr>
                </thead>
                <tbody class="bg-white dark:bg-[#1D1D1F] dark:border-[#1D1D1F]">
                    <tr *ngFor="let item of resentCollectionArr; let i = index">
                        <td class="px-6 py-4 text-gray-900 dark:text-gray-300"> {{ (i + 1) < 10 ? '0' + (i + 1) : (i +
                                1) }} </td>
                        <td class="px-6 py-4 text-gray-900 dark:text-gray-300">{{item.cropNameEnglish}}</td>
                        <td class="px-6 py-4 text-gray-900 dark:text-gray-300">{{item.varietyNameEnglish}}</td>
                        <td class="px-6 py-4 text-gray-900 text-center dark:text-gray-300">{{item.grade}}</td>
                        <td class="px-6 py-4 text-gray-900 dark:text-gray-300">{{item.totQty}}</td>
                        <td class="px-6 py-4 text-gray-900 dark:text-gray-300">{{item.totPrice}}</td>
                        <td class="px-6 py-4 text-gray-900 dark:text-gray-300">
                            <div class="flex flex-col items-center justify-center">
                                <p class="text-[#3E3E3E]">{{item.date | date:'yyyy/mm/dd'}}</p>
                                <p class="text-[#3E3E3E]">{{item.date | date:'hh:mm a'}}</p>
                            </div>
                        </td>
                    </tr>
                </tbody>

            </table>
        </div>
    </div>
</div>